<p>ï»¿</p>

<h2>Risus Publishing Database</h2>

<p>This project is an exercise in authoring a RESTful postgresql db API using <code>flask</code>, <code>SQLAlchemy</code> and <code>alembic</code>, completed as part of NuCamp's DevOps coding bootcamp. The conceit is that the database serves as the publishers/authors/editors-level database for a publishing company, Risus Publishing.</p>

<p>Included are the alembic migrations needed to instantiate the database in the alembic directory, a load_testing_data.py script to populate or repopulate the database with testing data, and the testing data .tsv files in the data directory. (In addition, an experimenting.py script is included if one needs to experiment in the package's <code>SQLAlchemy</code> context; best used with <code>python -i</code>.)</p>

<p>The RESTful JSON API is implemented via the modules in risuspubl.api.*. It's implemented by way of <code>flask</code> and <code>SQLAlchemy</code>; executing <code>flask run</code> in the top-level directory will spawn a <code>flask</code> webserver that will furnish the endpoints under https://localhost:5000/. The <code>SQLAlchemy.Model</code> subclasses are defined in risuspubl.dbmodels and the <code>create_app()</code> function that <code>flask</code> depends on is defined in risuspubl.api.flaskapp.</p>

<p>(Please see the Portfolio_Project_Requirements_Checklist.html file for a detailed review of the checklist from the Portfolio Project Final Submission page with indications where files satisfying each requirement can be found.)</p>

<h3>The Tables</h3>

<p>The default database name is <code>risuspublishing</code>. The database's tables are:</p>

<ul>
<li><code>authors</code>
<ul>
<li>the authors employed by the publishing company</li>
</ul></li>
<li><code>authors_books</code>
<ul>
<li>a bridge table between <code>authors</code> and <code>books</code></li>
<li>foreign keys <code>authors::author_id</code> and <code>books::book_id</code></li>
</ul></li>
<li><code>authors_manuscripts</code>
<ul>
<li>a bridge table between <code>authors</code> and <code>manuscripts</code></li>
<li>foreign keys <code>authors::author_id</code> and <code>manuscripts::manuscript_id</code></li>
</ul></li>
<li><code>authors_metadata</code>
<ul>
<li>biographical information about the authors</li>
<li>foreign key <code>authors::author_id</code>: the author the info is about</li>
</ul></li>
<li><code>books</code>
<ul>
<li>the books the publishing company has published</li>
<li>foreign key <code>editors::editor_id</code>: the editor who edited the book</li>
<li>foreign key <code>series::series_id</code>: the series the book belongs to (optional)</li>
</ul></li>
<li><code>clients</code>
<ul>
<li>the publishing company's customers</li>
<li>foreign key <code>salespeople::salesperson_id</code>: the salesperson who manages the relationship with that client</li>
</ul></li>
<li><code>editors</code>
<ul>
<li>the editors employed by the publishing company</li>
</ul></li>
<li><code>manuscripts</code>
<ul>
<li>manuscripts currently in-progress by authors employed by the publishing company</li>
<li>foreign key <code>editors::editor_id</code>: the editor that is editing the manuscript</li>
<li>foreign key <code>series::series_id</code>: the series the manuscript belongs to (optional)</li>
</ul></li>
<li><code>salespeople</code>
<ul>
<li>salespeople who work for the publishing company</li>
</ul></li>
<li><code>sales_records</code>
<ul>
<li>by-month sales records for each book published by the company, from the date of publication to today (if it's still in print), or the date the book went out of print (otherwise)</li>
<li>foreign key <code>books::book_id</code>: the book that the the sales record is for</li>
</ul></li>
<li><code>series</code>
<ul>
<li>the series that some of the books and manuscripts can be grouped into</li>
</ul></li>
</ul>

<h3>A Few Questions</h3>

<h4>How did the project's design evolve over time?</h4>

<p>I had the idea of implementing <code>create_model_obj()</code> and <code>update_model_obj()</code> while I was partway through writing all the endpoint functions. At first their parameters <code>dict</code> argument had values that were <code>3-tuples</code>: the type of the parameter, the arguments to the matching validator function, and the actual parameter value. I found myself storing prototype create/update <code>dict</code> arguments in <code>lambda</code>s at the top of the modules, so it could be evaluated in the context of an endpoint function.</p>

<p>Later when I came back to this design choice in an optimizing turn of mind, I implemented <code>risuspubl.api.utility.generate_create_update_argd()</code>. It's a function with a big inline <code>dict</code> that associated <code>SQLAlchemy.Model</code> subclass objects as keys with values that are <code>lambda</code>s which accept a <code>request.json</code> object and return a <code>dict</code> of parameter-name/parameter-value pairs that can be the arguments to a constructor for that <code>SQLAlchemy.Model</code> subclass. The <code>lambda</code>s are defined with validator functions inline such that once the <code>argd dict</code> has been instanced, all its keys (taken from <code>request.json</code>) have been checked for validity.  (See that function for more details.)</p>

<p><code>generate_create_update_argd()</code> accepts a <code>SQLAlchemy.Model</code> subclass object and the <code>request.json</code> object as arguments; it uses the model class to pick the matching <code>lambda</code> from its <code>dict</code>. That <code>lambda</code> is called with <code>response.json</code> as an argument, and the parameter names/values <code>dict</code> that results is returned to the caller, who can now use it as an argument for <code>create_model_obj()</code> or <code>update_model_obj()</code>.</p>

<p>The other major evolution happened when I noticed that, even with using <code>create_model_obj()</code> and <code>update_model_obj()</code>, a lot of my endpoints were copy-pasted code with one or two class objects changed and the primary key names swapped out. There had to be a way to reduce that duplication. At first I used classes that returned callable objects; later I had the light-bulb moment and replaced these with higher-order functions.</p>

<p>The majority of the API modules, excluding <code>authors.py</code> and <code>sales_records.py</code>, implement some or all of their endpoints using closures returned by the endpoint-general-case higher-order functions defined in <code>utility.py</code>:</p>

<ul>
<li><code>create_table_row_function()</code></li>
<li><code>delete_table_row_by_id_function()</code></li>
<li><code>delete_table_row_by_id_and_foreign_key_function()</code></li>
<li><code>display_table_rows_by_foreign_id_function()</code></li>
<li><code>display_table_rows_function()</code></li>
<li><code>display_table_row_by_id_function()</code></li>
<li><code>display_table_row_by_id_and_foreign_key_function()</code></li>
<li><code>update_table_row_by_id_function()</code></li>
<li><code>update_table_row_by_id_and_foreign_key_function()</code></li>
</ul>

<p>Each of these higher-order functions accepts one or two <code>SQLAlchemy.Model</code> subclass class objects as arguments, and returns a closure that implements a common endpoint case. The closure is generalized such that the argument(s) to its enclosing function fill in the blanks on its execution. When one of these closures is in use, a <code>flask</code> endpoint function can be implemented in a single line, simply by calling the closure with the endpoint function's arguments and returning its return value. The closures even do their own exception handling.</p>

<h4>Did you choose to use an ORM or raw SQL? Why?</h4>

<p>I worked with an ORM in nearly every case. In a few situations I found I needed results that only raw SQL could get me, so I used that. But otherwise I stuck to the ORM. I made the choice to use an ORM because it's something I hadn't done before, and I wanted to learn how to do it. It's really changed how I interact with SQL servers; I'll be using this in the future wherever I can, it's <em>much</em> simpler that using raw SQL and always being marshaling the results and parsing out the row results into useful values.</p>

<h4>What future improvements are in store, if any?</h4>

<p>I see this package as done. It certainly would be better off if I didn't implement any more endpoints! The only piece of the original design not implemented here was an idea for a <code>warehouse</code> table, a <code>warehouse_aisle</code> table, a <code>warehouse_location</code> table, and a <code>stocking_quantity</code> table, that, between them, would model the company's warehousing system. I dropped that from an early revision of my ERD because it just seemed out-of-place among the other tables. I don't think I'll bring it back.</p>

<h3>The API</h3>

<table border=3 cellpadding=5 cellspacing=5>
    <tr>
        <th>HTTP<br>Method</th>
        <th>Endpoint URL, with embedded argument(s)</th>
        <th>Functionality</th>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>authors</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>authors</code>
                table associated with the given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/books</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>books</code> table associated with the author with the
                given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>books</code>
                table associated with the given <code>book_id</code> and the
                given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>manuscripts</code> table associated with <the given
                code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/metadata</nobr></code></td>
        <td>
            <p>
                Displays a JSON object of the row in the
                <code>authors_metadata</code> table associated with the given
                <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for each of the two rows in the
                <code>authors</code> table associated with the two given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/books</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>books</code> table associated with both the given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>books</code>
                table associated with the given <code>book_id</code> and both
                the given <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>manuscripts</code> table associated with both the given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>manuscripts</code> table associated with the
                given <code>manuscript_id</code> and both the two given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>authors</code> table associated with the given
                <code>author_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"" }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>books</code> table associated with the given
                <code>book_id</code> and the given <code>author_id</code>. The
                object has this form:
            </p>
            <blockquote>
                <code>
                    { "edition_number":&#160;, "editor_id":&#160;0, "is_in_print":&#160;true,
                    "publication_date":&#160;"YYYY-MM-DD", "series_id":&#160;null,
                    "title":&#160;"" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>author_id</code>.
                The object has this form:
            </p>
            <blockquote>
                <code>
                    { "advance":&#160;", "due_date":&#160;"", "editor_id":&#160;0,
                    "manuscript_id":&#160;0, "series_id":&#160;null, "working_title":&#160;"" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/metadata</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>authors_metadata</code> table associated with the given
                <code>manuscript_id</code> and the given <code>author_id</code>.
                The object has this form:
            </p>
            <blockquote>
                <code>
                    { author_id":&#160;0, "age":&#160;0, "biography":&#160;"", "photo_url":&#160;"",
                    "photo_res_horiz":&#160;0, "photo_res_vert":&#160;0 }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>books</code> table associated with the given
                <code>book_id</code> and the two given <code>author_id</code>
                values. The object has this form:
            </p>
            <blockquote>
                <code>
                    { edition_number":&#160;0, "editor_id":&#160;0, "is_in_print":&#160;true,
                    "publication_date":&#160;"YYYY-MM-DD", "series_id":&#160;null,
                    "title":&#160;"" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>manuscripts</code> table associated with the
                given <code>manuscript_id</code> and the two given
                <code>author_id</code> values. The object has this form:
            </p>
            <blockquote>
                <code>
                    { advance":&#160;"", "due_date":&#160;"", "editor_id":&#160;0,
                    "manuscript_id":&#160;0, "series_id":&#160;null, "working_title":&#160;"" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>authors</code>
                table. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"" }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/books</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>books</code>
                table, and a row in the <code>authors_books</code> table
                associating it with the given <code>author_id</code>. The object
                has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "series_id":&#160;null, "title":&#160;"",
                    "publication_date":&#160;"", "edition_number":&#160;0, "is_in_print":
                    "" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the
                <code>manuscripts</code> table, and a row in the
                <code>authors_manuscripts</code> table associating it with the
                given <code>author_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "working_title":&#160;"", "due_date":
                    "YYYY-MM-DD", "advance":&#160;0 }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/metadata</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the
                <code>authors_metadata</code> table associated with the
                given <code>author_id</code>. Fails if there already is a
                row in the <code>authors_metadata</code> table for that
                <code>author_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "author_id":&#160;0, "age":&#160;0, "biography":&#160;"", "photo_url":
                    "", "photo_res_horiz":&#160;0, "photo_res_vert":&#160;0 }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/books</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>books</code>
                table and two rows in the <code>authors_books</code> table
                associating that row with both the given <code>author_id</code>
                values. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "series_id":&#160;null, "title":&#160;"",
                    "publication_date":&#160;"", "edition_number":&#160;0, "is_in_print":
                    "" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the
                <code>manuscripts</code> table and two rows in the
                <code>authors_manuscripts</code> table associating that row with
                both the given <code>author_id</code> values. The object has this
                form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "working_title":&#160;"",
                    "due_date":&#160;"YYYY-MM-DD", "advance":&#160;0, "series_id":&#160;null }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>authors</code> table associated
                with the given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>books</code> table associated
                with the given <code>book_id</code> and the given
                <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>manuscripts</code> table associated
                with the given <code>manuscript_id</code> and the given
                <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author_id}/metadata</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>authors_metadata</code> table
                associated with the given <code>author_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>books</code> table associated
                with the given <code>book_id</code> and both the given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/authors/{author1_id}/{author2_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>manuscripts</code> table associated
                with the given <code>manuscript_id</code> and both the given
                <code>author_id</code> values.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/books</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>books</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>books</code>
                table associated with the given <code>book_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>books</code> table associated with the given
                <code>book_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "series_id":&#160;0,
                    "title":&#160;"", publication_date":&#160;"YYYY-MM-DD",
                    "edition_number":&#160;0, "is_in_print":&#160;"" }
                </code>
            </blockquote>
            <p>
                The <code>series_id</code> argument is optional.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>books</code> table associated with
                the given <code>book_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/clients</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>clients</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>clients</code>
                table associated with the given <code>client_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>clients</code> table associated with the given
                <code>client_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "email_address":&#160;"", "phone_number":&#160;"", business_name":
                    "", "street_address":&#160;"", "city":&#160;"", "state":&#160;"",
                    "zipcode":&#160;"", "country":&#160;"", "salesperson_id":&#160;0 }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/clients</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>authors</code>
                table. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "salesperson_id":&#160;0, "email_address":&#160;"", "phone_number":
                    "", "business_name":&#160;"", "street_address":&#160;"", city":&#160;"",
                    "state":&#160;"", "zipcode":&#160;"", "country":&#160;"" }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>clients</code> table associated
                with the given <code>client_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>editors</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>editors</code>
                table associated with the given <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/books</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>books</code> table associated with the editor with the
                given <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>books</code>
                table associated with the given <code>book_id</code> and the
                given <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>manuscripts</code> table associated with <both the given
                code>editor_id</code> values.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>editors</code> table associated with the given
                <code>editor_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"", "salary":&#160;0</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>books</code> table associated with the given
                <code>book_id</code> and the given <code>editor_id</code>. The
                object has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, series_id":&#160;0, "title":&#160;"",
                    "publication_date":&#160;"YYYY-MM-DD", "edition_number":&#160;0,
                    "is_in_print":&#160;"" }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>editor_id</code>.
                The object has this form:
            </p>
            <blockquote>
                <code>
                    { series_id":&#160;0, "working_title":&#160;"", "due_date":
                    "YYYY-MM-DD", "advance":&#160;0 }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/editors</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>editors</code>
                table. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"", "salary":&#160;0 }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>editors</code> table associated
                with the given <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>books</code> table associated
                with the given <code>book_id</code> and the given
                <code>editor_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/editors/{editor_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>manuscripts</code> table associated
                with the given <code>manuscript_id</code> and the given
                <code>editor_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/manuscripts</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>manuscripts</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { "editor_id":&#160;0, "series_id":&#160;0, working_title":&#160;"",
                    "due_date":&#160;"YYYY-MM-DD", "advance":&#160;0 }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>manuscripts</code> table associated
                with the given <code>manuscript_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/salespeople</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>salespeople</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>salespeople</code> table associated with the given
                <code>salesperson_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}/clients</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>clients</code> table associated with the salesperson with
                the given <code>salesperson_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>clients</code>
                table associated with the given <code>client_id</code> and the
                given <code>salesperson_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>salespeople</code> table associated with the given
                <code>salesperson_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"", "salary":&#160;0 }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>clients</code> table associated with the
                given <code>client_id</code> and the given
                <code>salesperson_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>
                    { email_address":&#160;"", "phone_number":&#160;"", "business_name":
                    "", "street_address":&#160;"", "city":&#160;"", "state":&#160;"",
                    "zipcode":&#160;"", "country":&#160;"" }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/salespeople</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the
                <code>salespeople</code> table. The object has this form:
            </p>
            <blockquote>
                <code>{ "first_name":&#160;"", "last_name":&#160;"", "salary":&#160;0 }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}/clients</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>clients</code>
                table, and a row in the <code>salespeople_clients</code> table
                associating it with the given <code>salesperson_id</code>. The
                object has this form:
            </p>
            <blockquote>
                <code>
                    { "email_address":&#160;"", "phone_number":&#160;"", "business_name":
                    "", "street_address":&#160;"", "city":&#160;"", "state":&#160;"",
                    "zipcode":&#160;"", "country":&#160;"" }
                </code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>salespeople</code> table associated
                with the given <code>salesperson_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>DELETE</code></td>
        <td valign=top><code><nobr>/salespeople/{salesperson_id}/clients/{client_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>clients</code> table associated
                with the given <code>client_id</code> and the given
                <code>salesperson_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/{sales_record_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>sales_records</code> table associated with the given
                <code>sales_record_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/year/{year}</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>sales_records</code> table associated with the given
                <code>year</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/year/{year}/month/{month}</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>sales_records</code> table associated with the given
                <code>year</code> and <code>month</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>sales_records</code> table associated with the given
                <code>book_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/year/{year}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>sales_records</code> table associated with the given
                <code>year</code> and <code>book_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/sales_records/year/{year}/month/{month}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>sales_records</code> table associated with the given
                <code>year</code>, <code>month</code> and <code>book_id</code>.
            </p>
        </td>
    </tr>

    <tr>
        <td colspan="3"><hr width="75%"></td>
    </tr>

    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for every row in the
                <code>series</code> table.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series/{series_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>series</code>
                table associated with the given <code>series_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series/{series_id}/books</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>books</code> table associated with the salesperson with
                the given <code>series_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series/{series_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the <code>books</code>
                table associated with the given <code>book_id</code> and the
                given <code>series_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series/{series_id}/manuscripts</nobr></code></td>
        <td>
            <p>
                Displays a JSON list of objects, one for each row in the
                <code>manuscripts</code> table associated with the salesperson
                with the given <code>series_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>GET</code></td>
        <td valign=top><code><nobr>/series/{series_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Displays a JSON object for the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>series_id</code>.
            </p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/series/{series_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>series</code> table associated with the given
                <code>series_id</code>. The object has this form:
            </p>
            <blockquote>
                <code>{ "title":&#160;"", "volumes":&#160;0 }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/series/{series_id}/books/{book_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>books</code> table associated with the given
                <code>book_id</code> and the given <code>series_id</code>. The
                object has this form:
            </p>
            <blockquote>
                <code>
                    { "title":&#160;"", publication_date":&#160;"YYYY-MM-DD",
                    "edition_number":&#160;1, "is_in_print":&#160;true }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>PATCH</code></td>
        <td valign=top><code><nobr>/series/{series_id}/manuscripts/{manuscript_id}</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to modify the row in the
                <code>manuscripts</code> table associated with the given
                <code>manuscript_id</code> and the given <code>series_id</code>.
                The object has this form:
            </p>
            <blockquote>
                <code>
                    { "title":&#160;"", publication_date":&#160;"YYYY-MM-DD",
                    "edition_number":&#160;1, "is_in_print":&#160;true }
                </code>
            </blockquote>
            <p>The <code>series_id</code> argument is optional.</p>
        </td>
    </tr>
    <tr>
        <td valign=top><code>POST</code></td>
        <td valign=top><code><nobr>/series</nobr></code></td>
        <td>
            <p>
                Accepts a JSON object to add a row in the <code>series</code>
                table. The object has this form:
            </p>
            <blockquote>
                <code>{ "title":&#160;"", "volumes":&#160;0 }</code>
            </blockquote>
        </td>
    </tr>
    <tr>
        <td><code>DELETE</code></td>
        <td valign=top><code><nobr>/series/{series_id}</nobr></code></td>
        <td>
            <p>
                Deletes the row in the <code>series</code> table associated with
                the given <code>series_id</code>.
            </p>
        </td>
    </tr>
</table>
